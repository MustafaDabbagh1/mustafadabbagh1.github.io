<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mustafa Dabbagh | Data Analytics • Data Science • Machine Learning</title>
  <meta name="description" content="The animated portfolio landing page for Mustafa Dabbagh — Data Analytics, Data Science, and Machine Learning." />
  <meta property="og:title" content="Mustafa Dabbagh — Data Analytics • Data Science • ML" />
  <meta property="og:description" content="Impact-driven analytics and machine learning. Explore services, projects, skills, and get in touch." />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#0b1221" />

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Animation libs -->
  <script defer src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/typed.js@2.1.0/dist/typed.umd.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    :root{
      --bg:#0b1221;           /* deep night */
      --panel:#111a30;        /* card base */
      --ink:#e5ecff;          /* primary text */
      --muted:#a7b4d6;        /* secondary text */
      --brand:#5b8cff;        /* electric blue */
      --brand-2:#7cf7e2;      /* aqua */
      --brand-3:#ff7bd8;      /* pink */
      --accent:#ffd166;       /* honey */
      --ok:#24e39a;           /* green accent */
      --danger:#ff5b6e;       /* coral */
      --glass:rgba(255,255,255,.06);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
    }
    html[data-theme="light"]{
      --bg:#f5f7ff;
      --panel:#ffffff;
      --ink:#0d1b2a;
      --muted:#51607a;
      --glass:rgba(0,0,0,.04);
      --shadow: 0 8px 24px rgba(0,0,0,.10);
    }

    *{box-sizing:border-box}
    html,body{height:100%;scroll-behavior:smooth; width:100%; max-width:100%}

    /* === Stable page background (no seams) === */
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji';
      color:var(--ink);
      background:var(--bg);
      overflow-x:hidden;                  /* prevent page horizontal scroll */
      overscroll-behavior-x:none;         /* stop sideways rubber-band */
      touch-action:pan-y;                 /* allow vertical pan only by default */
      position:relative;
    }
    body::before{
      content:"";
      position:fixed;
      inset:-20% -20% -20% -20%;
      z-index:-9999;
      pointer-events:none;
      background:
        radial-gradient(1200px 720px at 10% 0%, rgba(20,32,62,.9) 0%, transparent 60%),
        radial-gradient(900px 520px at 90% 10%, rgba(14,26,52,.85) 0%, transparent 55%),
        linear-gradient(180deg, var(--bg) 0%, var(--bg) 100%);
    }

    /* --- Global UI --- */
    .container{max-width:1200px;margin:0 auto;padding:0 22px}
    .chip{display:inline-flex;align-items:center;gap:10px;padding:10px 14px;background:linear-gradient(135deg, var(--glass), transparent);border:1px solid rgba(255,255,255,.08);border-radius:999px;backdrop-filter:blur(8px)}
    .btn{display:inline-flex;gap:10px;align-items:center;justify-content:center;padding:14px 18px;border:none;border-radius:14px;font-weight:650;cursor:pointer;transition:.2s transform,.2s box-shadow;box-shadow:var(--shadow);text-decoration:none}
    .btn:hover{transform:translateY(-2px)}
    .btn-primary{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#081022}
    .btn-ghost{background:rgba(255,255,255,.06);color:var(--ink);border:1px solid rgba(255,255,255,.12)}

    .section{padding:96px 0;position:relative;scroll-margin-top:100px}
    .section h2{font-size:42px;margin:0 0 14px;letter-spacing:.4px}
    .section p.lead{font-size:18px;color:var(--muted);margin:0 0 24px}
    .section::after{
      content:"";position:absolute;left:0;right:0;bottom:-1px;height:1px;
      background:linear-gradient(90deg,transparent,rgba(255,255,255,.06),transparent);
      pointer-events:none;
    }

    /* --- Top Progress Bar --- */
    .progress{position:fixed;inset:0 0 auto 0;height:4px;background:linear-gradient(90deg,var(--brand),var(--brand-2),var(--brand-3));transform-origin:0% 50%;transform:scaleX(0);z-index:9999}

    /* --- Nav --- */
    nav.nav{
      position:fixed;
      top:calc(10px + env(safe-area-inset-top, 0px));
      left:50%;
      transform:translateX(-50%);
      width:min(1080px,96%);
      z-index:999;
      display:flex;align-items:center;justify-content:space-between;gap:8px;
      padding:10px 12px;border-radius:16px;background:rgba(14,20,40,.45);backdrop-filter:blur(12px);
      border:1px solid rgba(255,255,255,.08);box-shadow:var(--shadow);
      overflow:visible;
    }
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.6px;white-space:nowrap}
    .brand .logo{width:36px;height:36px;border-radius:12px;background:conic-gradient(from 180deg,var(--brand),var(--brand-2),var(--brand-3),var(--brand));display:grid;place-items:center;box-shadow:0 6px 20px rgba(123,247,226,.3)}
    .brand .logo span{font-family:"JetBrains Mono",monospace;font-weight:700;color:#081022;font-size:14px}

    .nav-links{
      display:flex;gap:10px;align-items:center;flex-wrap:nowrap;
      margin-left:auto; min-width:0; max-width:70vw;
      overflow-x:auto; overflow-y:hidden; -webkit-overflow-scrolling:touch;
      scrollbar-width:none;
      touch-action:pan-x;                 /* allow horizontal pan in nav only */
    }
    .nav-links::-webkit-scrollbar{display:none}
    .nav-links a{padding:10px 12px;border-radius:10px;color:var(--muted);text-decoration:none;border:1px solid transparent;white-space:nowrap}
    .nav-links a:hover{border-color:rgba(255,255,255,.14);color:var(--ink);background:rgba(255,255,255,.04)}
    /* MOBILE-ONLY NAV: show LinkedIn chip only */
    @media (max-width: 640px){
      .nav-links a:not(.chip){display:none}
      .nav-links .chip{display:inline-flex}
    }

    /* --- Hero --- */
    header.hero{
      padding-top:140px;padding-bottom:90px;position:relative;overflow:visible;
      isolation:isolate;
    }
    #constellation{position:absolute;inset:0;z-index:-1}

    .halo{position:absolute;inset:-10% -10% auto -10%;height:60vh;background:radial-gradient(closest-side, rgba(123,247,226,.18), transparent 70%);z-index:-1}
    .blobs{position:absolute;inset:0;pointer-events:none;z-index:-1}
    .blob{position:absolute;filter:blur(40px);opacity:.55;mix-blend-mode:screen;animation:float 18s ease-in-out infinite}
    .blob:nth-child(1){width:380px;height:380px;background:radial-gradient(circle at 30% 30%, var(--brand-3), transparent 60%);left:-40px;top:-30px}
    .blob:nth-child(2){width:420px;height:420px;background:radial-gradient(circle at 70% 40%, var(--brand-2), transparent 60%);right:-80px;top:60px;animation-duration:22s}
    .blob:nth-child(3){width:360px;height:360px;background:radial-gradient(circle at 50% 50%, var(--brand), transparent 60%);left:40%;bottom:-120px;animation-duration:26s}
    @keyframes float{0%{transform:translateY(0) translateX(0)}50%{transform:translateY(-30px) translateX(10px)}100%{transform:translateY(0) translateX(0)}}

    .hero-grid{display:grid;grid-template-columns:1.2fr .8fr;gap:36px;align-items:center}
    .headline{
      font-size:52px;line-height:1.1;margin:12px 0;
      background:linear-gradient(90deg,#fff,#cfe0ff 30%,#fff 60%);-webkit-background-clip:text;background-clip:text;color:transparent;position:relative;
    }
    .headline .spark{position:absolute;inset:auto -20px -10px auto;font-size:22px;color:var(--accent);animation:blink 2.4s infinite}
    @keyframes blink{0%,80%,100%{opacity:0}40%{opacity:1}}

    .typed{font-weight:700;color:var(--brand-2)}
    .hero-card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.12);border-radius:var(--radius);padding:22px;box-shadow:var(--shadow)}
    .hero-card img{display:block;width:100%;height:380px;object-fit:cover;border-radius:14px;border:1px solid rgba(255,255,255,.08)}

    .marquee{display:flex;gap:26px;overflow:hidden;mask-image:linear-gradient(90deg,transparent,#000 10%,#000 90%,transparent);margin-top:26px}
    .marquee-track{display:flex;gap:26px;animation:scroll 28s linear infinite}
    .tag{padding:10px 14px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);white-space:nowrap;font-size:14px;color:var(--muted)}
    @keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

    /* --- Card Base --- */
    .card{background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.12);border-radius:var(--radius);padding:22px;position:relative;overflow:hidden;transform-style:preserve-3d;transition:.25s transform,.25s box-shadow}
    .card:hover{transform:translateY(-6px) rotateX(.8deg) rotateY(-.6deg);box-shadow:0 20px 40px rgba(0,0,0,.35)}
    .card .glow{position:absolute;inset:0;pointer-events:none;background:radial-gradient(500px 200px at var(--x,50%) var(--y,50%), rgba(123,247,226,.24), transparent 60%);opacity:0;transition:.2s opacity}
    .card:hover .glow{opacity:1}
    .card i{font-size:28px;color:var(--brand-2)}
    .card h3{margin:12px 0 8px}
    .card p{color:var(--muted);margin:0 0 12px}
    .chip-row{display:flex;flex-wrap:wrap;gap:10px}

    /* --- Services Slider --- */
    .services-wrap{position:relative;margin-top:16px}
    .services-slider{
      display:flex;gap:18px;overflow-x:auto;scroll-snap-type:x mandatory;scroll-behavior:smooth;padding-bottom:10px;-webkit-overflow-scrolling:touch;
      touch-action:pan-x;               /* allow horizontal pan here */
    }
    .services-slider::-webkit-scrollbar{height:8px}
    .services-slider::-webkit-scrollbar-thumb{background:rgba(255,255,255,.14);border-radius:999px}
    .services-slider .slide{flex:0 0 clamp(260px, 32%, 380px);scroll-snap-align:start}
    .services-nav{
      position:absolute;top:-50px;right:0;left:auto;display:flex;gap:10px;justify-content:flex-end;pointer-events:none
    }
    .services-nav button{
      pointer-events:auto;width:42px;height:42px;border-radius:12px;border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);color:var(--ink);cursor:pointer;display:grid;place-items:center;box-shadow:var(--shadow);transition:transform .15s ease;
    }
    .services-nav button:hover{transform:translateY(-2px)}

    /* --- Work --- */
    .work-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:18px}
    .work-card{grid-column:span 6;background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.12);border-radius:var(--radius);overflow:hidden;position:relative}
    .work-card.large{grid-column:span 12}
    .work-media{aspect-ratio:16/9;overflow:hidden}
    .work-media img{display:block;width:100%;height:100%;object-fit:cover;transition:transform .6s ease}
    .work-card:hover .work-media img{transform:scale(1.05)}
    .work-body{padding:18px}
    .pill{display:inline-flex;gap:8px;align-items:center;padding:8px 10px;border-radius:999px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);font-size:12px;color:var(--muted)}

    /* --- Skills (Chart) --- */
    .panel{background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.12);border-radius:var(--radius);padding:18px}
    .skills-grid{display:grid;grid-template-columns:1.2fr .8fr;gap:18px;align-items:stretch}
    canvas{max-width:100%;height:auto;display:block}

    /* --- Counters --- */
    .metrics{display:grid;grid-template-columns:repeat(4,1fr);gap:18px}
    .metric{background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.12);border-radius:var(--radius);padding:18px;text-align:center}
    .metric .num{font-size:42px;font-weight:800;letter-spacing:.5px;background:linear-gradient(90deg, var(--brand), var(--brand-2));-webkit-background-clip:text;background-clip:text;color:transparent}
    .metric p{margin:8px 0 0;color:var(--muted)}

    /* --- Gallery --- */
    .gallery{display:grid;grid-template-columns:repeat(6,1fr);gap:10px}
    .gallery img{display:block;width:100%;height:180px;object-fit:cover;border-radius:12px;filter:saturation(1.1) contrast(1.05);transition:transform .35s ease, box-shadow .35s ease}
    .gallery img:hover{transform:translateY(-6px);box-shadow:0 18px 30px rgba(0,0,0,.35)}

    /* --- Process Timeline (PACE) --- */
    .timeline{display:grid;grid-template-columns:repeat(5,1fr);gap:18px;counter-reset:step}
    .step{position:relative;padding:18px;border-radius:var(--radius);border:1px solid rgba(255,255,255,.12);background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.02))}
    .step::before{counter-increment:step;content:counter(step);position:absolute;top:-14px;left:-14px;width:34px;height:34px;border-radius:50%;display:grid;place-items:center;background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#081022;font-weight:800;box-shadow:var(--shadow)}
    .step h4{margin:8px 0}
    .step p{color:var(--muted);margin:0}

    /* --- Contact --- */
    .contact{display:grid;grid-template-columns:1.1fr .9fr;gap:18px;align-items:stretch}
    .contact .cta{display:flex;flex-direction:column;gap:18px}
    .contact .cta .stack{display:flex;flex-wrap:wrap;gap:10px}
    .contact .form{background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.12);border-radius:var(--radius);padding:18px}
    .field{display:flex;flex-direction:column;gap:8px;margin-bottom:14px}
    .field input,.field textarea{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.14);border-radius:12px;padding:12px 14px;color:var(--ink);font:inherit}
    .field textarea{min-height:120px}

    /* --- Footer --- */
    footer{padding:26px 0;color:var(--muted);border-top:1px dashed rgba(255,255,255,.12);background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01))}

    /* --- Utilities --- */
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:18px}
    .muted{color:var(--muted)}
    .center{text-align:center}
    .hidden-xs{display:block}

    /* Hero text specific fixes */
    .hero-text-container { max-width: 720px; overflow-wrap: anywhere; word-break: normal; }
    .headline-line { display:block; width:100%; }
    .hero-description { font-size: 18px; line-height: 1.6; color: var(--muted); margin: 0 0 12px 0; max-width: 72ch; overflow-wrap: anywhere; word-break: normal; }
    .subtitles { font-weight: 600; color: var(--ink); letter-spacing:.2px; margin-bottom: 10px; }
    .subtitles span{ display:block; }

    /* === Impact Metrics (PPD project) === */
    .impact{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
    .impact-item{background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:14px;text-align:center}
    .impact-item .val{font-size:34px;font-weight:800;letter-spacing:.4px;background:linear-gradient(90deg,var(--brand),var(--brand-2));-webkit-background-clip:text;background-clip:text;color:transparent}
    .impact-item p{margin:6px 0 0;color:var(--muted);font-size:13px}

    /* === Theme Controls (accent only) === */
    .theme-controls{position:fixed; right:16px; bottom:16px; z-index:1000; display:flex; flex-direction:column; gap:10px; align-items:flex-end;}
    .theme-fab{width:48px;height:48px;border-radius:14px;border:1px solid rgba(255,255,255,.14);background:linear-gradient(135deg,var(--brand),var(--brand-2)); color:#081022; cursor:pointer; display:grid; place-items:center; box-shadow:var(--shadow);}
    .theme-panel{width:300px; max-width:92vw; background:var(--panel); color:var(--ink); border:1px solid rgba(255,255,255,.14); border-radius:16px; padding:14px; box-shadow:var(--shadow); display:none;}
    .theme-panel.open{display:block; animation:fadeIn .18s ease}
    @keyframes fadeIn{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)}}
    .row{display:flex;align-items:center;justify-content:space-between;gap:10px;margin:10px 0}
    .row label{font-size:14px;color:var(--muted)}
    input[type="color"]{appearance:none;border:none;width:44px;height:28px;border-radius:8px;cursor:pointer;background:linear-gradient(135deg,var(--brand),var(--brand-2));border:1px solid rgba(255,255,255,.2)}
    input[type="range"]{width:160px}

    /* --- Responsive --- */
    @media (max-width: 980px){
      .hero-grid{grid-template-columns:1fr}
      .skills-grid{grid-template-columns:1fr}
      .contact{grid-template-columns:1fr}
      .work-grid .work-card{grid-column:span 12}
      .metrics{grid-template-columns:repeat(2,1fr)}
      .timeline{grid-template-columns:1fr;gap:14px}
      .gallery{grid-template-columns:repeat(3,1fr)}
      .headline{ font-size:42px; line-height:1.15; }
      .hero-description { font-size:17px; line-height:1.5; }
      .hidden-xs{display:none}
      .hero-text-container{ padding-inline:10px; }
      .services-nav{top:-46px}
    }
    @media (max-width: 768px){
      .headline{ font-size:36px; line-height:1.2; }
      .hero-description { font-size:16px; }
      .section{padding:72px 0}
      .section h2{font-size:36px}
      .hero{padding-top:120px;padding-bottom:60px}
      .hero-text-container{ max-width: 100%; padding-inline:12px; }
      .services-slider .slide{ flex-basis: 80%; }
      .impact{grid-template-columns:1fr 1fr}
    }
    @media (max-width: 480px){
      .headline{ font-size:32px; line-height:1.25; }
      .hero-description { font-size:15px; line-height:1.5; }
      .section{padding:56px 0}
      .section h2{font-size:30px}
      .hero{padding-top:110px;padding-bottom:50px}
      .container{padding:0 16px}
      .hero-grid{gap:24px}
      .services-slider .slide{ flex-basis: 88%; }
      .impact{grid-template-columns:1fr}
    }
  </style>
</head>
<body id="top">
  <!-- Top Scroll Progress Bar -->
  <div class="progress" id="progress"></div>

  <!-- Nav -->
  <nav class="nav" aria-label="Primary">
    <div class="brand">
      <div class="logo" aria-hidden="true"><span>MD</span></div>
      <span>Mustafa&nbsp;Dabbagh</span>
    </div>
    <div class="nav-links">
      <a href="#experience">Experience</a>
      <a href="#work">Work</a>
      <a href="#skills">Skills</a>
      <a href="#contact">Contact</a>
      <a class="chip" href="https://www.linkedin.com/in/markabbagh/" target="_blank" rel="noopener"><i class="fa-brands fa-linkedin"></i> LinkedIn</a>
      <!-- Added Resume chip in nav -->
      <a class="chip" href="https://ppdtechnology.com/images/Resume.pdf" target="_blank" rel="noopener" aria-label="Open résumé PDF">
        <i class="fa-regular fa-file-lines"></i> Résumé
      </a>
    </div>
  </nav>

  <!-- Hero -->
  <header class="hero">
    <canvas id="constellation" aria-hidden="true"></canvas>
    <div class="halo"></div>
    <div class="blobs" aria-hidden="true">
      <div class="blob"></div>
      <div class="blob"></div>
      <div class="blob"></div>
    </div>
    <div class="container hero-grid">
      <div class="hero-text-container">
        <span class="chip" aria-label="Intro badge">
          <i class="fa-solid fa-bolt"></i>
          Impact with data — end-to-end
        </span>
        <h1 class="headline">
          <span class="headline-line">Hi, I'm <span style="color:var(--brand-2)">Mustafa</span></span>
          <span class="headline-line">— I turn messy data</span>
          <span class="headline-line">into clear decisions</span>
          <span class="spark">✦</span>
        </h1>

        <p class="hero-description subtitles" aria-label="Core specialties">
          <span>Data Analytics</span>
          <span>Data Science</span>
          <span>Machine Learning</span>
        </p>

        <p class="hero-description">I build clean pipelines, clear dashboards, and production-ready models.</p>
        <p class="hero-description"><span class="muted">Focus:</span> analytics engineering, A/B testing, forecasting, Marketing.</p>

        <div style="display:flex;gap:12px;flex-wrap:wrap;margin:22px 0">
          <a class="btn btn-primary" href="#contact"><i class="fa-solid fa-message"></i> Work with me</a>
          <a class="btn btn-ghost" href="#work"><i class="fa-solid fa-rocket"></i> See projects</a>
          <!-- Added Résumé button in hero -->
          <a class="btn btn-ghost" href="https://ppdtechnology.com/images/Resume.pdf" target="_blank" rel="noopener" aria-label="View résumé PDF">
            <i class="fa-regular fa-file-lines"></i> View Résumé (PDF)
          </a>
        </div>

        <div class="marquee" aria-hidden="true">
          <div class="marquee-track">
            <span class="tag"><i class="fa-solid fa-database"></i> SQL</span>
            <span class="tag"><i class="fa-solid fa-chart-line"></i> A/B Testing</span>
            <span class="tag"><i class="fa-solid fa-diagram-project"></i> dbt</span>
            <span class="tag"><i class="fa-solid fa-cloud"></i> BigQuery</span>
            <span class="tag"><i class="fa-solid fa-robot"></i> scikit-learn</span>
            <span class="tag"><i class="fa-solid fa-chart-pie"></i> Tableau</span>
            <span class="tag"><i class="fa-solid fa-wand-magic-sparkles"></i> XGBoost</span>
            <span class="tag"><i class="fa-solid fa-layer-group"></i> Pandas</span>
            <span class="tag"><i class="fa-solid fa-square-poll-vertical"></i> Power BI</span>
            <span class="tag"><i class="fa-solid fa-cloud-bolt"></i> Airflow</span>
            <!-- duplicate for continuous scroll -->
            <span class="tag"><i class="fa-solid fa-database"></i> SQL</span>
            <span class="tag"><i class="fa-solid fa-chart-line"></i> A/B Testing</span>
            <span class="tag"><i class="fa-solid fa-diagram-project"></i> dbt</span>
            <span class="tag"><i class="fa-solid fa-cloud"></i> BigQuery</span>
            <span class="tag"><i class="fa-solid fa-robot"></i> scikit-learn</span>
            <span class="tag"><i class="fa-solid fa-chart-pie"></i> Tableau</span>
            <span class="tag"><i class="fa-solid fa-wand-magic-sparkles"></i> XGBoost</span>
            <span class="tag"><i class="fa-solid fa-layer-group"></i> Pandas</span>
            <span class="tag"><i class="fa-solid fa-square-poll-vertical"></i> Power BI</span>
            <span class="tag"><i class="fa-solid fa-cloud-bolt"></i> Airflow</span>
          </div>
        </div>
        <div class="muted" style="margin-top:10px">Also known as: <span class="typed"></span></div>
      </div>

      <div class="hero-card hidden-xs">
        <img src="https://ppdtechnology.com/images/Data%20visualization%20dashboard%20on%20a%20monitor1.png" alt="Data visualization dashboard"/>
        <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap">
          <span class="pill"><i class="fa-solid fa-gauge-high"></i> Real-time Analytics</span>
          <span class="pill"><i class="fa-solid fa-sitemap"></i> ETL / ELT</span>
          <span class="pill"><i class="fa-solid fa-flask"></i> Experimentation</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Experience -->
  <section id="experience" class="section">
    <div class="container">
      <h2>Experience</h2>
      <p class="lead">From exploration to production. I partner with teams to find traction fast, then scale.</p>

      <div class="services-wrap">
        <div class="services-nav" aria-hidden="true">
          <button class="svc-prev" aria-label="Previous"><i class="fa-solid fa-chevron-left"></i></button>
          <button class="svc-next" aria-label="Next"><i class="fa-solid fa-chevron-right"></i></button>
        </div>

        <div class="services-slider" id="servicesSlider" aria-label="Services carousel">
          <!-- 1 -->
          <article class="slide card tilt" tabindex="0">
            <div class="glow"></div>
            <i class="fa-solid fa-magnifying-glass-chart" aria-hidden="true"></i>
            <h3>Data Analytics</h3>
            <p>Dashboards, KPIs, and deep-dive analysis that make performance obvious and actionable.</p>
            <div class="chip-row">
              <span class="chip">SQL</span><span class="chip">Tableau</span><span class="chip">Power BI</span><span class="chip">Analytics Eng</span>
            </div>
          </article>

          <!-- 2 -->
          <article class="slide card tilt" tabindex="0">
            <div class="glow"></div>
            <i class="fa-solid fa-brain" aria-hidden="true"></i>
            <h3>Data Science</h3>
            <p>Experiment design, causal insights, and predictive modeling to guide roadmaps.</p>
            <div class="chip-row">
              <span class="chip">Cohorts</span><span class="chip">A/B Tests</span><span class="chip">Forecasting</span><span class="chip">Causal Inference</span>
            </div>
          </article>

          <!-- 3 -->
          <article class="slide card tilt" tabindex="0">
            <div class="glow"></div>
            <i class="fa-solid fa-robot" aria-hidden="true"></i>
            <h3>Machine Learning</h3>
            <p>Practical ML — train, validate, and ship. Emphasis on MLOps and measurable business value.</p>
            <div class="chip-row">
              <span class="chip">scikit-learn</span><span class="chip">XGBoost</span><span class="chip">Model Serving</span><span class="chip">Monitoring</span>
            </div>
          </article>

          <!-- 4 -->
          <article class="slide card tilt" tabindex="0">
            <div class="glow"></div>
            <i class="fa-solid fa-bullhorn" aria-hidden="true"></i>
            <h3>Marketing using AI</h3>
            <p>LLM-powered campaigns, audience insights, and creative testing that lift ROI.</p>
            <div class="chip-row">
              <span class="chip">Segmentation</span><span class="chip">Attribution</span><span class="chip">Personalization</span><span class="chip">LLM / RAG</span>
            </div>
          </article>

          <!-- 5 -->
          <article class="slide card tilt" tabindex="0">
            <div class="glow"></div>
            <i class="fa-solid fa-globe" aria-hidden="true"></i>
            <h3>Futuristic Web Design</h3>
            <p>High-performance, animated sites with data visuals & clean UX—built for conversion.</p>
            <div class="chip-row">
              <span class="chip">GSAP</span><span class="chip">Web Vitals</span><span class="chip">Accessibility</span><span class="chip">SEO</span>
            </div>
          </article>
        </div>
      </div>
    </div>
  </section>

  <!-- Work -->
  <section id="work" class="section">
    <div class="container">
      <h2>Recent Work <span class="muted" style="font-size:18px">(Projects & Courses)</span></h2>
    <div class="work-grid">
      <!-- Project A (resized to match others: removed 'large') -->
      <article class="work-card tilt">
        <div class="work-media">
          <img src="https://ppdtechnology.com/images/Screenshot%202025-10-18%20at%202.53.03%E2%80%AFPM.png" alt="PPD Technology website and analytics results">
        </div>
        <div class="work-body">
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:8px">
            <a class="pill" href="https://ppdtechnology.com/" target="_blank" rel="noopener">
              <i class="fa-solid fa-link"></i> ppdtechnology.com
            </a>
            <span class="pill"><i class="fa-solid fa-chart-line"></i> Traffic ↑</span>
            <span class="pill"><i class="fa-solid fa-user-check"></i> Retention ↑</span>
            <span class="pill" aria-label="Forms increased by 4000 percent"><i class="fa-solid fa-file-circle-check"></i> Forms +4000%</span>
          </div>
          <h3>Project A — PPD Technology Website Redesign & Analytics</h3>
          <p class="muted">
            Designed and built a high-performance marketing site for
            <a href="https://ppdtechnology.com/" target="_blank" rel="noopener" style="color:var(--ink);text-decoration:underline">PPD Technology</a>.
            Post-launch results: significant traffic growth, higher site retention, and a <strong>4000% increase</strong> in form applications.
          </p>

          <!-- ==== Quantified Impact row ==== -->
          <div class="impact" role="list" aria-label="Quantified impact metrics">
            <div class="impact-item" role="listitem" aria-label="Bounce rate decreased by 18 percent">
              <div class="val">-18%</div>
              <p>Bounce rate</p>
            </div>
            <div class="impact-item" role="listitem" aria-label="Primary CTA click-through rate increased by 22 percent">
              <div class="val">+22%</div>
              <p>Primary CTA CTR</p>
            </div>
            <div class="impact-item" role="listitem" aria-label="ETL time reduced by 35 percent">
              <div class="val">-35%</div>
              <p>ETL time (build → refresh)</p>
            </div>
          </div>
          <!-- ===================================== -->
        </div>
      </article>

      <!-- NEW Project: E-commerce A/B Test -->
      <article class="work-card tilt">
        <div class="work-media">
          <img src="https://ppdtechnology.com/images/a-b-testing.jpg" alt="E-commerce A/B Test dashboard preview">
        </div>
        <div class="work-body">
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:8px">
            <span class="pill"><i class="fa-solid fa-flask"></i> A/B Testing</span>
            <span class="pill"><i class="fa-solid fa-database"></i> SQL</span>
            <span class="pill"><i class="fa-brands fa-python"></i> pandas + statsmodels</span>
          </div>
          <h3>E-commerce A/B Test — New Checkout</h3>
          <p class="muted">
            Designed and ran a checkout experiment on synthetic-but-realistic data. The test variant showed a
            <strong>−18.23% absolute conversion drop</strong> vs control (z=2.37, p=0.0089). Recommendation:
            pause rollout and investigate device/OS splits, traffic mix, and implementation bugs; re-run with tighter instrumentation.
          </p>

          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
            <a class="btn btn-primary" href="https://github.com/MustafaDabbagh1/ecommerce-ab-test" target="_blank" rel="noopener">
              <i class="fa-brands fa-github"></i> View Code
            </a>
            <a class="btn btn-ghost" href="https://nbviewer.org/github/MustafaDabbagh1/ecommerce-ab-test/blob/main/analysis.ipynb" target="_blank" rel="noopener">
              <i class="fa-solid fa-book-open"></i> Open Notebook
            </a>
          </div>
        </div>
      </article>

      <!-- Project B -->
      <article class="work-card tilt">
        <div class="work-media">
          <img src="https://ppdtechnology.com/images/advanced%20data%20analytics.png" alt="Google Advanced Data Analytics certificate visual">
        </div>
        <div class="work-body">
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:8px">
            <a class="pill" href="https://www.coursera.org/account/accomplishments/specialization/certificate/62ZEPASDDEN6" target="_blank" rel="noopener"><i class="fa-solid fa-certificate"></i> Certificate</a>
            <a class="pill" href="https://drive.google.com/drive/folders/1Je8iJqjJ9e3utQnR4ta-O8_EJQjT-Mas" target="_blank" rel="noopener"><i class="fa-solid fa-folder-open"></i> Capstone</a>
            <a class="pill" href="https://www.coursera.org/professional-certificates/google-advanced-data-analytics" target="_blank" rel="noopener"><i class="fa-solid fa-circle-info"></i> Program Info</a>
          </div>
          <h3>Project B — Google Advanced Data Analytics (Completed)</h3>
          <p class="muted">
            Completed the Advanced Data Analytics specialization covering statistics, predictive modeling, experimental design, and stakeholder communication.
          </p>
        </div>
      </article>

      <!-- Project C -->
      <article class="work-card tilt">
        <div class="work-media">
          <img src="https://ppdtechnology.com/images/Data%20analytics%20coursera.png" alt="Google Data Analytics certificate visual">
        </div>
        <div class="work-body">
          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:8px">
            <a class="pill" href="https://www.coursera.org/account/accomplishments/specialization/certificate/FLAF74DIXQZ9" target="_blank" rel="noopener"><i class="fa-solid fa-certificate"></i> Certificate</a>
            <a class="pill" href="https://www.youtube.com/watch?v=rYMw9HIns1E" target="_blank" rel="noopener"><i class="fa-brands fa-youtube"></i> Capstone Video</a>
            <a class="pill" href="https://www.coursera.org/professional-certificates/google-data-analytics" target="_blank" rel="noopener"><i class="fa-solid fa-circle-info"></i> Program Info</a>
          </div>
          <h3>Project C — Google Data Analytics (Completed)</h3>
          <p class="muted">Completed the end-to-end Google Data Analytics specialization (ask → prepare → process → analyze → share).</p>
        </div>
      </article>
    </div>
    </div>
  </section>

  <!-- Skills & Tools -->
  <section id="skills" class="section">
    <div class="container">
      <h2>Skills & Tools</h2>
      <p class="lead">A balanced stack — from data foundations to decision science to deployment.</p>
      <div class="skills-grid">
        <div class="panel">
          <canvas id="skillsChart" width="600" height="400" aria-label="Skills proficiency radar chart"></canvas>
        </div>
        <div class="panel">
          <div class="metrics">
            <div class="metric"><div class="num" data-target="12">0</div><p>Visualizations created</p></div>
            <div class="metric"><div class="num" data-target="10">0</div><p>Dashboards built</p></div>
            <div class="metric"><div class="num" data-target="2">0</div><p>Certificates earned</p></div>
            <div class="metric"><div class="num" data-target="5">0</div><p>Portfolio projects</p></div>
          </div>
          <p class="muted" style="margin-top:10px"></p>
        </div>
      </div>
    </div>
  </section>

  <!-- Process (PACE) -->
  <section class="section">
    <div class="container">
      <h2>How I Work <span class="muted" style="font-size:18px">(P.A.C.E.)</span></h2>
      <p class="lead">Data analytics PACE: <strong>Plan</strong>, <strong>Analyze</strong>, <strong>Construct</strong>, <strong>Execute</strong>.</p>
      <div class="timeline">
        <div class="step"><h4>01 — Plan</h4><p>Define the problem, audience, and measurable success criteria. Align on scope, risks, and data availability.</p></div>
        <div class="step"><h4>02 — Analyze</h4><p>EDA, hypotheses, and statistical tests. Translate patterns into insights and recommended actions.</p></div>
        <div class="step"><h4>03 — Construct</h4><p>Build data models, pipelines, dashboards, and/or ML. Validate quality, performance, and usability.</p></div>
        <div class="step"><h4>04 — Execute</h4><p>Ship to production, monitor KPIs, and iterate. Enable stakeholders to act on insights quickly.</p></div>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="section">
    <div class="container contact">
      <div class="cta">
        <h2>Let's build something useful</h2>
        <p class="lead">Available for analytics, data science, and ML projects. Best way to reach me is via LinkedIn or the form.</p>
        <div class="stack">
          <a class="btn btn-primary" href="https://www.linkedin.com/in/markabbagh/" target="_blank" rel="noopener"><i class="fa-brands fa-linkedin"></i> Connect on LinkedIn</a>
          <a class="btn btn-ghost" href="#work"><i class="fa-solid fa-briefcase"></i> See projects</a>
        </div>
        <div style="margin-top:10px" class="muted">The form uses Formspree for secure submissions.</div>
      </div>

      <!-- Formspree-powered form -->
      <form class="form" action="https://formspree.io/f/xblzbrvp" method="POST">
        <div class="field">
          <label for="name">Your name</label>
          <input id="name" name="name" placeholder="Jane Doe" required />
        </div>
        <div class="field">
          <label for="email">Your email</label>
          <input id="email" type="email" name="email" placeholder="you@company.com" required />
        </div>
        <div class="field">
          <label for="message">Message</label>
          <textarea id="message" name="message" placeholder="Tell me about your goals…" required></textarea>
        </div>

        <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off" />

        <button class="btn btn-primary" type="submit"><i class="fa-solid fa-paper-plane"></i> Send</button>
        <p class="muted" style="margin-top:10px">Powered by Formspree — you'll see a confirmation after submitting.</p>
      </form>
    </div>
  </section>

  <footer>
    <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
      <div>© <span id="year"></span> <strong>Mustafa Dabbagh</strong>. All rights reserved.</div>
      <div style="display:flex;gap:10px;align-items:center">
        <a class="chip" href="#top" title="Back to top"><i class="fa-solid fa-circle-up"></i> Top</a>
        <a class="chip" href="https://www.linkedin.com/in/markabbagh/" target="_blank" rel="noopener"><i class="fa-brands fa-linkedin"></i> LinkedIn</a>
        <!-- Added Resume chip in footer -->
        <a class="chip" href="https://ppdtechnology.com/images/Resume.pdf" target="_blank" rel="noopener" aria-label="Open résumé PDF from footer">
          <i class="fa-regular fa-file-lines"></i> Résumé
        </a>
      </div>
    </div>
  </footer>

  <!-- THEME CONTROLS (accent only) -->
  <div class="theme-controls">
    <button class="theme-fab" id="openTheme" title="Accent settings"><i class="fa-solid fa-sliders"></i></button>
    <div class="theme-panel" id="themePanel" aria-live="polite" aria-label="Theme controls">
      <div class="row">
        <label for="accentPicker">Accent</label>
        <input id="accentPicker" type="color" value="#5b8cff" aria-label="Pick accent color"/>
      </div>
      <div class="row">
        <label for="hueRange">Hue blend</label>
        <input id="hueRange" type="range" min="0" max="360" step="1" value="200" aria-label="Adjust accent hue"/>
      </div>
      <div class="row" style="justify-content:flex-end;gap:8px">
        <button class="btn btn-ghost" id="resetTheme"><i class="fa-solid fa-rotate-left"></i> Reset</button>
        <button class="btn btn-primary" id="closeTheme"><i class="fa-solid fa-check"></i> Done</button>
      </div>
    </div>
  </div>

  <script>
    // ===== Scroll progress bar =====
    const progress = document.getElementById('progress');
    addEventListener('scroll', () => {
      const total = document.body.scrollHeight - innerHeight;
      const pct = Math.max(0, Math.min(1, scrollY / total));
      progress.style.transform = `scaleX(${pct})`;
    }, {passive: true});

    // ===== Tilt effect for cards =====
    document.querySelectorAll('.tilt').forEach(card => {
      card.addEventListener('mousemove', (e) => {
        const r = card.getBoundingClientRect();
        thex = (e.clientX - r.left) / r.width * 2 - 1;
        they = (e.clientY - r.top) / r.height * 2 - 1;
        card.style.transform = `translateY(-6px) rotateX(${ -they * 3}deg) rotateY(${ thex * 3}deg)`;
        card.style.setProperty('--x', `${e.clientX - r.left}px`);
        card.style.setProperty('--y', `${e.clientY - r.top}px`);
      });
      card.addEventListener('mouseleave', () => { card.style.transform = ''; });
    });

    // ===== Typed.js for roles =====
    document.addEventListener('DOMContentLoaded', () => {
      new Typed('.typed', {
        strings: ['Data Analyst', 'Data Scientist', 'Machine Learning Engineer'],
        typeSpeed: 48,
        backSpeed: 24,
        backDelay: 1000,
        loop: true,
        smartBackspace: true
      });
    });

    // ===== Count up metrics when visible =====
    const counters = document.querySelectorAll('.num');
    const io = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if(entry.isIntersecting){
          const el = entry.target; const target = +el.dataset.target; let cur = 0;
          const step = Math.max(1, Math.round(target / 60));
          const tick = () => { cur += step; if(cur >= target){ el.textContent = target; } else { el.textContent = cur; requestAnimationFrame(tick);} };
          tick(); io.unobserve(el);
        }
      })
    }, {threshold:.6});
    counters.forEach(c => io.observe(c));

    // ===== Chart.js Radar (skills) =====
    const chartIO = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if(entry.isIntersecting){
          const ctx = document.getElementById('skillsChart');
          new Chart(ctx, {
            type: 'radar',
            data: {
              labels: ['SQL','Python','EDA','Modeling','Visualization','MLOps','Experimentation'],
              datasets: [{
                label: 'Proficiency',
                data: [92, 90, 88, 84, 86, 80, 85],
                fill: true,
                backgroundColor: 'rgba(123,247,226,0.18)',
                borderColor: 'rgba(123,247,226,1)',
                pointBackgroundColor: 'rgba(91,140,255,1)',
                pointBorderColor: '#fff'
              }]
            },
            options: {
              responsive: true,
              scales: { r: { angleLines: { color: 'rgba(255,255,255,.15)' }, grid: { color: 'rgba(255,255,255,.1)' }, pointLabels:{ color:'#dbe7ff' }, suggestedMin: 0, suggestedMax: 100 } },
              plugins:{ legend:{ labels:{ color:'#cfe0ff' } } }
            }
          });
          chartIO.disconnect();
        }
      });
    }, {threshold:.4});
    chartIO.observe(document.getElementById('skillsChart'));

    // ===== GSAP scroll reveals =====
    function reveal(selector, opts={}){
      if(!window.gsap) return;
      gsap.utils.toArray(selector).forEach(el => {
        gsap.from(el, { opacity:0, y:30, duration:.8, ease:'power2.out', scrollTrigger:{ trigger:el, start:'top 85%' }, ...opts });
      });
    }
    document.addEventListener('DOMContentLoaded', () => {
      if(window.gsap){
        gsap.registerPlugin(ScrollTrigger);
        reveal('.card');
        reveal('.work-card');
        reveal('.step');
        reveal('.metric');
        reveal('.gallery img', { y:20, stagger:.08 });
      }
    });

    // ===== Services slider controls =====
    (function(){
      const slider = document.getElementById('servicesSlider');
      const prev = document.querySelector('.svc-prev');
      const next = document.querySelector('.svc-next');

      function slideWidth(){
        const first = slider.querySelector('.slide');
        return first ? first.getBoundingClientRect().width + 18 : slider.clientWidth * 0.9;
      }
      prev.addEventListener('click', () => slider.scrollBy({left: -slideWidth(), behavior:'smooth'}));
      next.addEventListener('click', () => slider.scrollBy({left:  slideWidth(), behavior:'smooth'}));

      // drag to scroll (mouse only; touch scrolls natively)
      let isDown = false, startX = 0, scrollLeft = 0;
      slider.addEventListener('mousedown', (e) => {
        isDown = true; slider.classList.add('grabbing');
        startX = e.pageX - slider.offsetLeft;
        scrollLeft = slider.scrollLeft;
      });
      slider.addEventListener('mouseleave', () => { isDown = false; slider.classList.remove('grabbing'); });
      slider.addEventListener('mouseup', () => { isDown = false; slider.classList.remove('grabbing'); });
      slider.addEventListener('mousemove', (e) => {
        if(!isDown) return;
        e.preventDefault();
        const x = e.pageX - slider.offsetLeft;
        slider.scrollLeft = scrollLeft - (x - startX) ;
      });

      // keyboard accessibility
      slider.addEventListener('keydown', (e) => {
        if(e.key === 'ArrowRight'){ slider.scrollBy({left: slideWidth(), behavior:'smooth'}); }
        if(e.key === 'ArrowLeft'){ slider.scrollBy({left: -slideWidth(), behavior:'smooth'}); }
      });
    })();

    // ===== Footer year =====
    document.getElementById('year').textContent = new Date().getFullYear();

    // ===== Accent Controls (persisted) =====
    (function(){
      const root = document.documentElement;
      const openBtn = document.getElementById('openTheme');
      const panel = document.getElementById('themePanel');
      const closeBtn = document.getElementById('closeTheme');
      const resetBtn = document.getElementById('resetTheme');
      const picker = document.getElementById('accentPicker');
      const hueRange = document.getElementById('hueRange');

      const store = {
        get(k, d){ try{ const v = localStorage.getItem(k); return v ?? d; }catch{ return d; } },
        set(k, v){ try{ localStorage.setItem(k, v); }catch{} }
      };

      function hexToHsl(hex){
        hex = hex.replace('#','');
        if(hex.length===3){ hex = hex.split('').map(c=>c+c).join(''); }
        const r = parseInt(hex.substr(0,2),16)/255;
        const g = parseInt(hex.substr(2,2),16)/255;
        const b = parseInt(hex.substr(4,2),16)/255;
        const max=Math.max(r,g,b), min=Math.min(r,g,b);
        let h, s, l=(max+min)/2;
        if(max===min){ h=s=0; }
        else{
          const d=max-min;
          s = l>0.5 ? d/(2-max-min) : d/(max+min);
          switch(max){
            case r: h=(g-b)/d+(g<b?6:0);break;
            case g: h=(b-r)/d+2;break;
            case b: h=(r-g)/d+4;break;
          }
          h*=60;
        }
        return {h, s: s*100, l: l*100};
      }
      const hsl = (h,s,l)=>`hsl(${Math.round(h)} ${Math.round(s)}% ${Math.round(l)}%)`;

      function applyAccent(baseHex, hue){
        const {h,s,l} = hexToHsl(baseHex);
        const brand = hsl(h, Math.min(95, s||70), Math.max(40, Math.min(70, l||60)));
        const altHue = (hue || h + 36) % 360;
        const brand2 = hsl(altHue, 90, 70);
        root.style.setProperty('--brand', brand);
        root.style.setProperty('--brand-2', brand2);
        store.set('md-brand', brand);
        store.set('md-brand2', brand2);
        store.set('md-picker', baseHex);
        store.set('md-hue', String(hue ?? altHue));
      }

      // Load persisted
      const savedBrand = store.get('md-brand', null);
      const savedBrand2 = store.get('md-brand2', null);
      const savedPicker = store.get('md-picker', '#5b8cff');
      const savedHue = +store.get('md-hue', '200');

      if(savedBrand && savedBrand2){
        root.style.setProperty('--brand', savedBrand);
        root.style.setProperty('--brand-2', savedBrand2);
      }
      document.getElementById('accentPicker').value = savedPicker;
      document.getElementById('hueRange').value = savedHue;

      // Events
      openBtn.addEventListener('click', ()=> panel.classList.toggle('open'));
      closeBtn.addEventListener('click', ()=> panel.classList.remove('open'));
      picker.addEventListener('input', ()=> applyAccent(picker.value, +hueRange.value));
      hueRange.addEventListener('input', ()=> applyAccent(picker.value, +hueRange.value));
      resetBtn.addEventListener('click', ()=>{
        picker.value = '#5b8cff';
        hueRange.value = 200;
        applyAccent('#5b8cff', 200);
      });

      // Initialize once
      applyAccent(savedPicker, savedHue);
    })();

    // ===== Constellation / Particle Background =====
    (function(){
      const canvas = document.getElementById('constellation');
      if(!canvas) return;
      const ctx = canvas.getContext('2d');
      const mqReduce = window.matchMedia('(prefers-reduced-motion: reduce)');
      let particles = [], rafId = null, mouse = {x: null, y: null};

      function resize(){
        const rect = canvas.getBoundingClientRect();
        const dpr = devicePixelRatio || 1;
        canvas.width = Math.floor(rect.width * dpr);
        canvas.height = Math.floor(rect.height * dpr);
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
        const count = Math.min(120, Math.round((rect.width * rect.height) / 15000));
        particles = Array.from({length: count}, ()=>({
          x: Math.random()*rect.width,
          y: Math.random()*rect.height,
          vx:(Math.random()-0.5)*0.4,
          vy:(Math.random()-0.5)*0.4,
          r: Math.random()*1.3 + 0.6
        }));
      }

      function draw(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        const connectDist = 120;
        ctx.fillStyle = 'rgba(255,255,255,0.8)';
        const rect = canvas.getBoundingClientRect();
        for(const p of particles){
          p.x += p.vx; p.y += p.vy;
          if(mouse.x !== null){
            const dx = p.x - mouse.x, dy = p.y - mouse.y, d2 = dx*dx + dy*dy;
            if(d2 < 1600){ const inv = 0.003/Math.sqrt(d2||1); p.vx += dx*inv; p.vy += dy*inv; }
          }
          if(p.x < 0 || p.x > rect.width) p.vx *= -1;
          if(p.y < 0 || p.y > rect.height) p.vy *= -1;
          ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
        }
        for(let i=0;i<particles.length;i++){
          for(let j=i+1;j<particles.length;j++){
            const a = particles[i], b = particles[j];
            const dx = a.x - b.x, dy = a.y - b.y, d = Math.hypot(dx,dy);
            if(d < connectDist){
              ctx.strokeStyle = `rgba(200, 230, 255, ${1 - d/connectDist})`;
              ctx.lineWidth = 1;
              ctx.beginPath(); ctx.moveTo(a.x, a.y); ctx.lineTo(b.x, b.y); ctx.stroke();
            }
          }
        }
        rafId = requestAnimationFrame(draw);
      }

      function start(){ if(rafId) return; resize(); rafId = requestAnimationFrame(draw); }
      function stop(){ if(rafId){ cancelAnimationFrame(rafId); rafId=null; } ctx.clearRect(0,0,canvas.width,canvas.height); }

      const hero = document.querySelector('header.hero');
      const ro = new ResizeObserver(()=> resize());
      ro.observe(hero);

      hero.addEventListener('mousemove', (e)=>{
        const rect = hero.getBoundingClientRect();
        mouse.x = e.clientX - rect.left; mouse.y = e.clientY - rect.top;
      });
      hero.addEventListener('mouseleave', ()=> { mouse.x = mouse.y = null; });

      function handleMotionPreference(){ if(mqReduce.matches){ stop(); canvas.style.display='none'; } else { canvas.style.display='block'; start(); } }
      mqReduce.addEventListener?.('change', handleMotionPreference);
      handleMotionPreference();
    })();
  </script>
</body>
</html>
